<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoIP Portal Upgrade | TechGrid Systems</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #020617;
            color: #f8fafc;
            overflow-x: hidden;
        }

        .gradient-bg {
            background: radial-gradient(circle at 20% 30%, rgba(37, 99, 235, 0.1), transparent),
                        radial-gradient(circle at 80% 70%, rgba(30, 58, 138, 0.05), transparent);
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .grid-pattern {
            background-image: linear-gradient(rgba(37, 99, 235, 0.03) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(37, 99, 235, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .float-animation { animation: float 4s ease-in-out infinite; }

        .spinner {
            border: 2px solid rgba(255,255,255,0.1);
            border-left-color: white;
            border-radius: 50%;
            width: 14px;
            height: 14px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center relative gradient-bg">

    <div class="absolute inset-0 grid-pattern pointer-events-none"></div>
    
    <div class="relative z-10 max-w-5xl px-6 w-full py-20">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
            
            <!-- Left Column -->
            <div class="text-left">
                <div class="mb-8">
                    <span class="text-2xl italic font-black tracking-tighter text-white uppercase">
                        TechGrid<span class="text-blue-500">Systems</span>
                    </span>
                    <div class="mt-2 flex items-center gap-2">
                        <span class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></span>
                        <span class="text-[10px] font-extrabold uppercase tracking-[0.2em] text-blue-400">Next-Gen VoIP Experience</span>
                    </div>
                </div>

                <h1 class="text-5xl md:text-6xl font-black tracking-tighter mb-6 leading-none">
                    Upgrading Your <br/>
                    <span class="text-blue-500">Communication.</span>
                </h1>
                
                <p class="text-slate-400 text-lg mb-10 leading-relaxed font-medium">
                    We are currently migrating our Voice Engine to the new **TechGrid Systems** unified platform. Expect crystal-clear HD audio, advanced call routing, and a completely redesigned management console.
                </p>

                <!-- Status Checkers -->
                <div class="grid grid-cols-2 gap-4 mb-10">
                    <div class="glass-panel p-4 rounded-xl flex items-center gap-3">
                        <i class="fas fa-play-circle text-blue-500 animate-pulse"></i>
                        <span class="text-[10px] font-bold uppercase tracking-widest text-slate-300">Core Migration: Starting</span>
                    </div>
                    <div class="glass-panel p-4 rounded-xl flex items-center gap-3">
                        <i class="fas fa-shield-check text-green-500"></i>
                        <span class="text-[10px] font-bold uppercase tracking-widest text-slate-300">Security: High Level Security</span>
                    </div>
                </div>

                <!-- Notify Me -->
                <div id="form-container">
                    <form onsubmit="handleNotify(event)" class="flex flex-col sm:flex-row gap-3">
                        <input type="email" id="user-email" required placeholder="name@company.com" 
                            class="flex-1 bg-slate-900/80 border border-slate-700 rounded-xl px-6 py-4 text-sm focus:outline-none focus:border-blue-500 transition-all font-medium text-white">
                        <button type="submit" id="submit-btn"
                            class="bg-blue-600 hover:bg-blue-700 text-white font-black uppercase tracking-widest text-[10px] px-8 py-4 rounded-xl transition shadow-xl shadow-blue-500/20 flex items-center justify-center gap-2 min-w-[160px]">
                            Get Early Access
                        </button>
                    </form>
                </div>

                <!-- Error Box (Hidden by default) -->
                <div id="error-msg" class="hidden mt-4 bg-red-500/10 border border-red-500/30 p-4 rounded-xl">
                    <p class="text-red-400 text-xs font-bold uppercase tracking-widest">
                        <i class="fas fa-exclamation-triangle mr-2"></i>Transmission Error
                    </p>
                    <p class="text-slate-400 text-[11px] mt-1">Please check your connection and try again.</p>
                </div>

                <div id="success-msg" class="hidden mt-4">
                    <div class="bg-blue-500/10 border border-blue-500/30 p-6 rounded-2xl">
                        <p class="text-blue-400 text-xs font-bold uppercase tracking-widest mb-2">
                            <i class="fas fa-check-circle mr-2"></i>Email Sent Successfully
                        </p>
                        <p class="text-slate-400 text-sm leading-relaxed italic">
                            A confirmation and preview link has been dispatched to your inbox.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="hidden lg:block relative">
                <div class="glass-panel p-10 rounded-[2.5rem] relative overflow-hidden float-animation border-white/10">
                    <div class="absolute -top-10 -right-10 w-40 h-40 bg-blue-600/10 rounded-full blur-3xl"></div>
                    <div class="relative space-y-6">
                        <div class="h-2 w-24 bg-blue-500/20 rounded-full mb-8"></div>
                        <div class="space-y-3">
                            <div class="h-10 w-full bg-white/5 rounded-xl border border-white/5 flex items-center px-4 justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <div class="w-20 h-2 bg-white/10 rounded-full"></div>
                                </div>
                                <div class="w-8 h-2 bg-white/10 rounded-full"></div>
                            </div>
                            <div class="h-10 w-full bg-white/5 rounded-xl border border-white/5 flex items-center px-4 justify-between opacity-60">
                                <div class="flex items-center gap-3">
                                    <div class="w-2 h-2 bg-slate-500 rounded-full"></div>
                                    <div class="w-24 h-2 bg-white/10 rounded-full"></div>
                                </div>
                                <div class="w-6 h-2 bg-white/10 rounded-full"></div>
                            </div>
                        </div>

                        <div class="pt-8 text-center border-t border-white/5">
                            <div class="flex justify-center gap-6">
                                <div>
                                    <span id="days" class="text-4xl font-black text-white block">00</span>
                                    <span class="text-[9px] font-bold text-slate-500 uppercase tracking-widest">Days</span>
                                </div>
                                <div>
                                    <span id="hours" class="text-4xl font-black text-white block">00</span>
                                    <span class="text-[9px] font-bold text-slate-500 uppercase tracking-widest">Hrs</span>
                                </div>
                                <div>
                                    <span id="minutes" class="text-4xl font-black text-white block">00</span>
                                    <span class="text-[9px] font-bold text-slate-500 uppercase tracking-widest">Min</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="absolute -bottom-6 -left-6 w-24 h-24 bg-blue-600 rounded-3xl -z-10 rotate-12 blur-2xl opacity-20"></div>
                <i class="fas fa-phone-alt absolute -top-8 -left-8 text-6xl text-white/5"></i>
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-24 pt-8 border-t border-slate-800/50 flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="flex items-center gap-6 text-[10px] font-bold uppercase tracking-widest text-slate-500">
                <span class="flex items-center gap-2"><i class="fas fa-check-circle text-green-500"></i> Legacy Engine Online</span>
                <span class="text-slate-800">|</span>
                <a href="#" class="hover:text-blue-400 transition">Portal Status</a>
            </div>
            <p class="text-[10px] text-slate-600 font-bold uppercase tracking-[0.2em]">
                &copy; 2024 TechGrid Systems Limited. Engineering Dept.
            </p>
        </div>
    </div>

    <script>
        const apiKey = ""; 

        // Countdown
        const targetDate = new Date();
        targetDate.setDate(targetDate.getDate() + 14);

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = targetDate - now;
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));

            document.getElementById("days").innerText = Math.max(0, days).toString().padStart(2, '0');
            document.getElementById("hours").innerText = Math.max(0, hours).toString().padStart(2, '0');
            document.getElementById("minutes").innerText = Math.max(0, minutes).toString().padStart(2, '0');
        }

        setInterval(updateCountdown, 1000);
        updateCountdown();

        async function handleNotify(e) {
            e.preventDefault();
            const email = document.getElementById('user-email').value;
            const btn = document.getElementById('submit-btn');
            const formContainer = document.getElementById('form-container');
            const successMsg = document.getElementById('success-msg');
            const errorMsg = document.getElementById('error-msg');

            btn.disabled = true;
            btn.innerHTML = `<div class="spinner"></div> Sending...`;
            errorMsg.classList.add('hidden');

            const systemPrompt = "You are the TechGrid Systems notification agent. Your task is to process a notification for the user.";
            const userQuery = `Process the following notification for the user at ${email}:
            
Dear ${email},

Thank you for submitting your email to TechGrid Systems. We are delighted to have you on board with our new VoIP platform. 

To get to see the platform in action click the link below: 
https://www.voip-platform.techgrid-systems.com

Thank you 

Kind regards,
TechGrid Systems Engineering Team`;

            try {
                let retryCount = 0;
                const maxRetries = 5;
                let success = false;

                while (retryCount < maxRetries && !success) {
                    try {
                        // FIX: Using correct text generation endpoint instead of TTS
                        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: [{ parts: [{ text: userQuery }] }],
                                systemInstruction: { parts: [{ text: systemPrompt }] }
                            })
                        });

                        if (response.ok) {
                            success = true;
                        } else {
                            throw new Error('API Response Error');
                        }
                    } catch (err) {
                        retryCount++;
                        if (retryCount < maxRetries) {
                            const delay = Math.pow(2, retryCount - 1) * 1000;
                            await new Promise(resolve => setTimeout(resolve, delay));
                        }
                    }
                }

                if (!success) throw new Error('Failed after retries');

                // Success UI transition
                formContainer.classList.add('opacity-0');
                setTimeout(() => {
                    formContainer.classList.add('hidden');
                    successMsg.classList.remove('hidden');
                }, 300);

            } catch (error) {
                console.error("Transmission failed:", error);
                btn.disabled = false;
                btn.innerText = "Get Early Access";
                errorMsg.classList.remove('hidden');
            }
        }
    </script>
</body>
</html>
